<!doctype html>
<html>
 <head>
	 <meta charset="utf-8">
	 <title>Pendulum</title>
	 <link rel="stylesheet" href="style.css">
 </head>
 <body>
	 <canvas id="canvas" width="400" height="400"></canvas>
	 <script src="utils.js"></script>
	 <script src="ball.js"></script>
	 <script>
		window.onload = function () {
			var canvas = document.getElementById('canvas'),
			context = canvas.getContext('2d'),
			ball = new Ball(30),
			angle = 0,
			centerX = canvas.width / 2,
			centerY = canvas.height / 2,
			radiusX = 150,
			radiusY = 100,
			speed = -0.01;
			dir = 1;
				(function drawFrame () {
					window.requestAnimationFrame(drawFrame, canvas);
					context.clearRect(0, 0, canvas.width, canvas.height);
					
					console.log( "ball.x = " + ball.x + ", radiusX = " + radiusX );
					console.log( "dir = " + dir + " speed = " + speed + " angle = " + angle );
					console.log( "dir2 = " + dir * (Math.cos(angle) * radiusX) );

					if ( ball.x < 51 ) {
						ball.x = 51;
						speed = -speed;
						
					} else if ( ball.x > 50 && ball.x <= 350 ) {
						angle += speed;
						ball.x = centerX + Math.cos(angle) * radiusX;
					} 

					if ( ball.x > 349.9999 ) {
						ball.x = 348;
						speed = -speed;
					}	
					
					ball.y = centerY + Math.sin(angle) * radiusY;
					
					ball.draw(context);
					
				}());
		};
	 </script>
	 </body>
</html> 