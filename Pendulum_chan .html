<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Маятник</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <canvas id="canvas" width="400" height="400">
       </canvas>

  <script src="Point.js"></script>
  <script src="Vector.js"></script>
  <script src="Cube.js"></script>
  <script src="Pendulum_chan.js"></script>
  
  <script>


    window.onload = function() {
      var canvas = document.getElementById("canvas"),
        context = canvas.getContext("2d"),
        x0 = canvas.width / 2,
        y0 = canvas.height / 2;
      context.translate(x0, y0);
      
      // Установка первоначальной длины маятника
      var lenghtPendulum = document.getElementById("lenghtPendulum");
      var lenghtPendulumValue = lenghtPendulum.value;
      console.log('Первоначально установленная длина маятника: ' + lenghtPendulumValue);


      p = new Point (0, -200, 0);
      pendulum = new Pendulum(p, lenghtPendulumValue, 30);
      var i = 1;

      (function drawFrame() {
        window.requestAnimationFrame(drawFrame, canvas);
        context.clearRect(-x0, -y0, canvas.width, canvas.height);

        pendulum.draw(context, i);
        i = i + 3;
        if (i > 360)
          {i = i - 360}
      }());


      
      // Установка события на изменение длины маятника
      function selectLengPendulum()
      {
        pendulum.lenght = lenghtPendulum.value;
        console.log('Изменённая длина маятника: ' + lenghtPendulum.value);
      }
      lenghtPendulum.addEventListener('change', selectLengPendulum, false );

    }
  </script>

  <form>
    <label for="lenghtPendulum" > Выберите длину маятника: </label>
    <select id="lenghtPendulum" >
      <option value="100">100px</option>
      <option value="200"  selected="selected">200px</option>
      <option value="300">300px</option>
    </select>
  </form>

</body>

</html>
