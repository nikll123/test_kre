<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Маятник</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <canvas id="canvas" width="400" height="400">
       </canvas>

  <script src="Point.js"></script>
  <script src="Vector.js"></script>
  <script src="Cube.js"></script>
  <script src="Dot.js"></script>
  <script src="Pendulum_chan.js"></script>
  
  <script>


    window.onload = function() {
      var canvas = document.getElementById("canvas"),
        context = canvas.getContext("2d"),
        x0 = canvas.width / 2,
        y0 = canvas.height / 2;
      context.translate(x0, y0);

      p = new Point (0, -100, 0);
      pendulum = new Pendulum(p, 200, 30);
      var phase = 0;

        pendulum.draw(context);

      (function drawFrame() {
        window.requestAnimationFrame(drawFrame, canvas);
        context.clearRect(-x0, -y0, canvas.width, canvas.height);

        if (phase >= 360)
          {phase = phase - 360}
        a1 = phase * Math.PI / 180;
        angle = 20 * Math.sin(a1);
        pendulum.setAngle(angle);
        pendulum.plummet.rotate(pendulum.plummet.center, phase, phase, phase);
        pendulum.draw2(context);
        phase = phase + 3;
      }());

    }
  </script>

</body>

</html>
